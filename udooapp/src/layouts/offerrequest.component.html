<location *ngIf="load" (onSaved)="saveLocation($event)"></location>
<div class="input-container">
  <h1>{{type > -1 ? 'Update' : 'New'}}{{offer ? ' offer' : ' request'}}</h1>
  <form #userForm="ngForm" novalidate>
    <span class="input-label">Title</span><br>
    <text-input [type]="'text'" [placeholder]="'Title'" [value]="data.title"
                (text)="data.title=$event" [validators]="[emptyValidator]"
                (onStateChange)="valid[0] = $event"></text-input>
    <span class="input-label">Category</span><br>
    <select-input [options]="category" (text)="onChangeSelect($event)"
                  (onStateChange)="valid[1] = $event"></select-input>
    <span class="input-label">Description</span><br>
    <text-area [row]="4" [validators]="[emptyValidator]" (onStateChange)="valid[2]=$event" [column]="50"
               [placeholder]="'Description'" (text)="data.description=$event" [value]="data.description"></text-area>
    <span class="input-label">Profile picture</span><br>

    <div class="input-profile-picture-background">
      <div class="upload-picture-loader" *ngIf="loaderVisible"></div>
      <div class="upload-picture-error" *ngIf="pictureLoadError">Upload error!</div>
      <img
        [ngClass]="{'input-profile-picture-image' : (data.image == null|| data.image.length == 0 || data.image === 'null')}"
        [src]="getPictureUrl()">
    </div>
    <div class="picture-button-container">
      <file-input [text]="'Browse'" (value)="onClickBrowse($event)"></file-input>
      <file-input [text]="'Take'" (value)="onClickBrowse($event)"></file-input>
      <input type="button" class="input-file input-button button-light" value="Clear"
             (click)="onClickCancel()"/>
    </div>
    <span class="input-label">Location</span><br>
    <text-input [type]="'text'" [placeholder]="'Choose service location'"
                [value]="location" (text)="data.location=$event; location=$event.address;"
                (onClickInput)="onClickSelectLocation()" [validators]="[emptyValidator]"
                (onStateChange)="valid[3] = $event"></text-input>
    <span class="input-label">{{offer ? 'Availability' : 'Job date'}}</span>
    <text-input *ngIf="offer" [type]="'text'"
                [placeholder]="'Availability'" [value]="data.availability" (text)="data.availability=$event"
                [validators]="[emptyValidator]" (onStateChange)="valid[4] = $event"></text-input>
    <div *ngIf="!offer">
      <text-input [type]="'date'"
                  [placeholder]="'Date'" [value]="data.jobdate" (text)="data.jobdate=$event"
                  [validators]="[emptyValidator, dateValidator]" (onStateChange)="valid[4] = $event"></text-input>
      <text-input [type]="'time'" [validators]="[emptyValidator, timeValidator]"
                  (onStateChange)="valid[5] = $event"></text-input>
      <text-input [type]="'number'" [validators]="[emptyValidator, numberValidator]" (onStateChange)="valid[6] = $event"
                  [placeholder]="'Period'"></text-input>
    </div>
    <span class="input-label">Expiry date</span><br>
    <text-input [type]="'date'" [value]="getDate()"
                (text)="data.expirydate=$event" [validators]="[emptyValidator, dateValidator]"
                (onStateChange)="valid[!offer ? 7 : 5] = $event"></text-input>

    <input type="button" [value]="(type >= 0 ? 'Update' : 'Save')" class="input-button button-dark" (click)="save()"/>
    <input *ngIf="type > -1" type="button" value="Delete" class="input-button button-dark" (click)="deleteService()"/>
  </form>
  <div class="ok-message response-message">{{message}}</div>
  <div class="error-message response-message">{{error}}</div>
</div>
